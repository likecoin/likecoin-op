-- Create index "account_cosmos_address" to table: "accounts"
CREATE INDEX "account_cosmos_address" ON "accounts" ("cosmos_address");
-- Drop index "evm_events_transaction_hash_key" from table: "evm_events"
DROP INDEX "evm_events_transaction_hash_key";
-- Modify "evm_events" table
ALTER TABLE "evm_events" ALTER COLUMN "topic1" DROP NOT NULL, ALTER COLUMN "topic2" DROP NOT NULL, ALTER COLUMN "topic3" DROP NOT NULL, ALTER COLUMN "data" DROP NOT NULL, ADD COLUMN "transaction_index" bigint NOT NULL, ADD COLUMN "topic0_hex" character varying NOT NULL, ADD COLUMN "topic1_hex" character varying NULL, ADD COLUMN "topic2_hex" character varying NULL, ADD COLUMN "topic3_hex" character varying NULL, ADD COLUMN "data_hex" character varying NULL, ADD COLUMN "removed" boolean NOT NULL, ADD COLUMN "status" character varying NOT NULL, ADD COLUMN "failed_reason" character varying NULL;
-- Create index "evmevent_address" to table: "evm_events"
CREATE INDEX "evmevent_address" ON "evm_events" ("address");
-- Create index "evmevent_block_number" to table: "evm_events"
CREATE INDEX "evmevent_block_number" ON "evm_events" ("block_number");
-- Create index "evmevent_log_index" to table: "evm_events"
CREATE INDEX "evmevent_log_index" ON "evm_events" ("log_index");
-- Create index "evmevent_transaction_hash_tran_eaa9f01cda3dd4dd2e77aa1834d03fcc" to table: "evm_events"
CREATE UNIQUE INDEX "evmevent_transaction_hash_tran_eaa9f01cda3dd4dd2e77aa1834d03fcc" ON "evm_events" ("transaction_hash", "transaction_index", "block_number", "log_index");
-- Create index "nftclass_deployer_address" to table: "nft_classes"
CREATE INDEX "nftclass_deployer_address" ON "nft_classes" ("deployer_address");
-- Create index "nftclass_owner_address" to table: "nft_classes"
CREATE INDEX "nftclass_owner_address" ON "nft_classes" ("owner_address");
-- Drop index "nfts_token_id_key" from table: "nfts"
DROP INDEX "nfts_token_id_key";
-- Rename a column from "token_url" to "image_data"
ALTER TABLE "nfts" RENAME COLUMN "token_url" TO "image_data";
-- Modify "nfts" table
ALTER TABLE "nfts" ALTER COLUMN "token_id" TYPE character varying, DROP COLUMN "raw", ALTER COLUMN "description" SET NOT NULL, ALTER COLUMN "image" TYPE character varying, ALTER COLUMN "image" SET NOT NULL, ADD COLUMN "contract_address" character varying NOT NULL, ADD COLUMN "token_uri" character varying NOT NULL, ADD COLUMN "external_url" character varying NULL, ADD COLUMN "background_color" character varying NULL, ADD COLUMN "animation_url" character varying NULL, ADD COLUMN "youtube_url" character varying NULL;
-- Create index "nft_contract_address_token_id" to table: "nfts"
CREATE UNIQUE INDEX "nft_contract_address_token_id" ON "nfts" ("contract_address", "token_id");
-- Create index "nft_owner_address" to table: "nfts"
CREATE INDEX "nft_owner_address" ON "nfts" ("owner_address");
-- Create "evm_event_processed_block_heights" table
CREATE TABLE "evm_event_processed_block_heights" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "contract_type" character varying NOT NULL, "contract_address" character varying NOT NULL, "event" character varying NOT NULL, "block_height" bigint NOT NULL, PRIMARY KEY ("id"));
-- Create index "evmeventprocessedblockheight_c_359778ab852b7f2f4ff60d10c7184ffc" to table: "evm_event_processed_block_heights"
CREATE UNIQUE INDEX "evmeventprocessedblockheight_c_359778ab852b7f2f4ff60d10c7184ffc" ON "evm_event_processed_block_heights" ("contract_type", "contract_address", "event");
-- Create "transaction_memos" table
CREATE TABLE "transaction_memos" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "transaction_hash" character varying NOT NULL, "book_nft_id" character varying NOT NULL, "from" character varying NOT NULL, "to" character varying NOT NULL, "token_id" bigint NOT NULL, "memo" character varying NOT NULL, "block_number" bigint NOT NULL, PRIMARY KEY ("id"));
-- Create index "transactionmemo_book_nft_id_token_id" to table: "transaction_memos"
CREATE INDEX "transactionmemo_book_nft_id_token_id" ON "transaction_memos" ("book_nft_id", "token_id");
-- Create index "transactionmemo_transaction_hash_book_nft_id_token_id" to table: "transaction_memos"
CREATE UNIQUE INDEX "transactionmemo_transaction_hash_book_nft_id_token_id" ON "transaction_memos" ("transaction_hash", "book_nft_id", "token_id");
